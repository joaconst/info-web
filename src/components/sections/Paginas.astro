---
import '../../styles/pages.css'
---

<section
    class="grid grid-cols-2 gap-8 items-center justify-center h-screen"
    id="grid-animation-section"
>
    <article
        class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl transition-transform hover:scale-105"
    >
        1
    </article>
    <article
        class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl transition-transform hover:scale-105"
    >
        2
    </article>
    <article
        class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl transition-transform hover:scale-105"
    >
        3
    </article>
    <article
        class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl transition-transform hover:scale-105"
    >
        4
    </article>
</section>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const section = document.getElementById("grid-animation-section");
        const cards = document.querySelectorAll(".grid-card");

        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        cards.forEach((card, index) => {
                            const cardElement = card as HTMLElement;
                            setTimeout(() => {
                                if (cardElement) {
                                    cardElement.style.animation = `grid-appear-subtle 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.15}s forwards`;
                                    cardElement.classList.remove("opacity-0");
                                }
                            }, index * 150);
                        });
                    } else {
                        cards.forEach((card) => {
                            const cardElement = card as HTMLElement;
                            if (cardElement) {
                                cardElement.style.animation = "";
                                cardElement.classList.add("opacity-0");
                            }
                        });
                    }
                });
            },
            { threshold: 0.3 },
        );

        if (section) observer.observe(section);
    });
</script>
