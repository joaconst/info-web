<section class="grid grid-cols-2 grid-rows-2 gap-8 items-center justify-center h-screen" id="grid-animation-section">
    <article class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl hover:scale-105 transition-transform">
        1
    </article>
    <article class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl hover:scale-105 transition-transform">
        2
    </article>
    <article class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl hover:scale-105 transition-transform">
        3
    </article>
    <article class="grid-card opacity-0 flex items-center justify-center w-full bg-primary p-8 rounded-4xl shadow-2xl hover:scale-105 transition-transform">
        4
    </article>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const section = document.getElementById('grid-animation-section');
    const cards = document.querySelectorAll('.grid-card');

    const observer = new IntersectionObserver(
        (entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    cards.forEach((card, index) => {
                        setTimeout(() => {
                            const cardElement = card as HTMLElement;
                            cardElement.style.animation = `grid-appear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.15}s forwards`;
                            cardElement.classList.remove('opacity-0');
                        }, index * 150);
                    });
                } else {
                    cards.forEach(card => {
                        const cardElement = card as HTMLElement;
                        cardElement.style.animation = '';
                        cardElement.classList.add('opacity-0');
                    });
                }
            });
        },
        { threshold: 0.3 }
    );

    if (section) observer.observe(section);
});

</script>

<style>
@keyframes grid-appear {
    0% {
        opacity: 0;
        transform: 
            rotateX(45deg) 
            translateY(40px) 
            scale(0.8)
            translateX(var(--start-pos, 0px));
    }
    80% {
        transform: 
            rotateX(-10deg) 
            translateY(-8px) 
            scale(1.05);
    }
    100% {
        opacity: 1;
        transform: 
            rotateX(0deg) 
            translateY(0) 
            scale(1);
    }
}

.grid-card:nth-child(odd) {
    --start-pos: -50px;
}

.grid-card:nth-child(even) {
    --start-pos: 50px;
}

.opacity-0 {
    opacity: 0;
    transition: opacity 0.3s ease-out;
}

.hover\:scale-105:hover {
    transform: scale(1.05);
}

.rounded-4xl {
    border-radius: 2.5rem;
}
</style>